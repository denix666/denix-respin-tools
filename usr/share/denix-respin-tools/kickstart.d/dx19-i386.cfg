cdrom
auth --enableshadow --passalgo=sha512
lang en_US.UTF-8
keyboard us
timezone Europe/Vilnius --isUtc
bootloader --location=mbr

# Для автоматического форматирования
####################################
clearpart --all --initlabel
autopart

repo --name=fedora --mirrorlist=http://mirrors.fedoraproject.org/mirrorlist?repo=fedora-19&arch=i386
repo --name=updates --mirrorlist=http://mirrors.fedoraproject.org/mirrorlist?repo=updates-released-f19&arch=i386
repo --name=denix --baseurl=http://fedora.os.vc/yum/base/19/i386


############################################################################
%packages --nobase #########################################################
############################################################################

# Base packages
#####################################
@core
@standard
@anaconda-tools
anaconda
dracut
grub2
bash
bash-completion
mc
chrony
lvm2

# Denix stuff
#####################################
denix-repo
denix-skel
denix-prompt
denix-umask
denix-colors
denix-bash
denix-grub2-theme

############################################################################
%end #######################################################################
############################################################################

############################################################################
%post ######################################################################
############################################################################

# Add issue message
###################
cat > /etc/issue << EOF_ISSUE
Welcome to DeniX-OS
~~~~~~~~~~~~~~~~~~~

EOF_ISSUE

# Fix grub2 options
###################
cp -r /usr/share/grub/themes/denix /boot/grub2/themes
if grep "^GRUB_THEME=" /etc/default/grub; then
    sed -i 's/^GRUB_THEME=.*$/GRUB_THEME="\/boot\/grub2\/themes\/denix\/theme.txt"/g' /etc/default/grub
else
    echo "GRUB_THEME=\"/boot/grub2/themes/denix/theme.txt\"" >> /etc/default/grub
fi
grub2-mkconfig -o /boot/grub2/grub.cfg

# Disable SELinux
#################
sed -i 's/^SELINUX=.*$/SELINUX=disabled/g' /etc/selinux/config
setenforce 0

# Add rc.local compatibility
############################
echo "#! /bin/bash" > /etc/rc.d/rc.local
chmod 755 /etc/rc.d/rc.local

############################################################################
%end #######################################################################
############################################################################
